/*!
 * Powered by uglifiyJS v2.6.1, Build by http://jsmin.6tie.net
 * build time: Mon May 13 2019 10:51:15 GMT+0800 (China Standard Time)
*/
var LoginV1={nextAction:0,isLogin:!1,ajaxLock:!1,key_bookshelf:"BOOK_SHELF",thirdLoginShow:0,init:function(o){$("#j-delPassWord").hide(),$("#j-delPassWord").on("click",function(){$(this).prev().val(""),$(".login-button").addClass("disabled")}),$("#j-switchBtn").on("click",function(){0==LoginV1.thirdLoginShow?($(".icon-arrow-down").addClass("up"),$("#j-otherWay").animate({height:"0.36rem",opacity:1},"fast").addClass("on"),$("#j-otherLogin").addClass("up"),LoginV1.thirdLoginShow=1,$("#j-switchBtn").attr("data-report","1")):($(".icon-arrow-down").removeClass("up"),$("#j-otherWay").animate({height:"0",opacity:0},"fast").removeClass("on"),$("#j-otherLogin").removeClass("up"),LoginV1.thirdLoginShow=0,$("#j-switchBtn").attr("data-report","0"))}),$("#j-passWordOff").on("click",function(){$("#password").replaceWith($("#password").clone().attr("type","text")),$("#j-passWordOff").hide(),$("#j-passWordOn").show()}),$("#j-passWordOn").on("click",function(){$("#password").replaceWith($("#password").clone().attr("type","password")),$("#j-passWordOff").show(),$("#j-passWordOn").hide()}),$("input").on("keyup",function(o){LoginV1.hideError(),LoginV1.checkForm()?$(".login-button").removeClass("disabled"):$(".login-button").addClass("disabled")}),$("input").on("focus",function(o){$(this).parent().removeClass("error")}),$("#password").on("keyup",function(){var o=$(this).val().trim();""!=o?$("#j-delPassWord").show():$("#j-delPassWord").hide()}).on("focus",function(){var o=$(this).val().trim();""!=o?$("#j-delPassWord").show():$("#j-delPassWord").hide()}).on("blur",function(){setTimeout(function(){$("#j-delPassWord").hide()},100)}),$(".login-button").on("click",function(){LoginV1.checkForm()&&LoginV1.login()}),$("#imgCode").on("click",function(){LoginV1.refreshCode()}),$("#btnRefreshCode").on("click",function(){LoginV1.refreshCode()})},refreshCode:function(){var o=$("#imgCode").attr("src");o.indexOf("&r=")>-1&&(o=o.substr(0,o.indexOf("&r="))),o+="&r="+10*Math.random(),$("#imgCode").attr("src",o)},checkForm:function(){var o=$("#user_name").val().trim(),n=$("#password").val();if(0==o.length)return!1;if(0==n.length)return!1;var t=$("#txtCode").val().trim();return 0==t.length?!1:!0},hideError:function(){$(".error-tip").html("").addClass("hidden")},login:function(){var o=this;LoginV1.ajaxLock||$(".login-button").hasClass("loading")||(LoginV1.ajaxLock=!0,$(".login-button").addClass("loading"),$.ajax({type:"POST",url:"?method=loginAjax",data:$("#login_form").serialize(),dataType:"json",error:function(o,n,t){t&&(LoginV1.ajaxLock=!1)},timeout:3e3,success:function(n){if(LoginV1.tip(n.msg),$(".login-button").removeClass("loading"),LoginV1.ajaxLock=!1,"1"==n.code){var t=o.getStorage(o.key_bookshelf),i=Array.isArray(t)?t:[];if(i.length>0){var r=JSON.stringify(i);$.post("/CsAjax.do?method=sysBookshelf",{books:r},function(o){})}location.href="/m/myhome.html"}}}))},getStorage:function(o){try{return JSON.parse($.storage(o))}catch(n){return null}},tip:function(o){layer.open({content:o,skin:"msg",time:2})},alert:function(o,n){n||(n="Ok"),layer.open({content:o,btn:n})}};$(document).ready(function(){LoginV1.init()});