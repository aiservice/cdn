/*!
 * Powered by uglifiyJS v2.6.1, Build by http://jsmin.6tie.net
 * build time: Mon Mar 23 2020 14:57:19 GMT+0800 (China Standard Time)
*/
function audioTip(){var a=i18nUtils.getDefaultLocale(),t=i18nUtils.prop("book_listen_tip1"),i=i18nUtils.prop("book_listen_tip2"),e=i18nUtils.prop("book_listen_tip3");"en"!=a&&(t="\u6682\u65e0\u97f3\u9891\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5728\u7ebf\u542c\u4e66"),layer.open({title:[t],content:i+"<br/>"+e,btn:"Ok"})}if("undefined"!=typeof audioList&&audioList.length>0){var html="",ia=1;for(var c in audioList)html+='<li class="chapter-li" id="chapter'+ia+'" data-num="'+ia+'"> <a href="#chapter'+ia+'" data-src="'+audioList[c].urlAudio+'" class="chapter-li-a"> <span class="chapter-index">'+ia++ +". "+audioList[c].title+"</span> </a> </li>";$("#audios").append(html)}else{var tip4=i18nUtils.prop("book_listen_tip4");$("#audios").append('<li class="chapter-li"><a class="chapter-li-a" href=\'#\'>'+tip4+"</a></li>")}var tip5=i18nUtils.prop("book_listen_tip5");$("#summary").prepend('<div class="module module-merge"><div class="chapter-li-a playing">'+tip5+"</div></div>"),$(function(){function a(a){o.progressMoveMark||l.css("width",a)}function t(){var a=$(".play-round"),t=a.parent();t.on("click",function(i){var e=t.offset().left,l=i.pageX-e,s=l/t.width();a.css("width",s),n.skipTo(s)})}var i=$(".player-current-time"),e=$(".player-duration-time"),l=$(".play-round"),s=$(".play-btn"),o={volume:0,store_chapter_key:"ting-chapter"+$("#bookDetailWrapper").data("bid"),progressMoveMark:!1};t();var r=audiojs.createAll({loadError:function(){BookUtils.tip("\u8d44\u6e90\u8def\u5f84\u9519\u8bef")},loadProgress:function(a){$(".cache-round").css("width",100*a+"%")},loadStarted:function(){var a=Math.floor(this.duration/60),t=Math.floor(this.duration%60);e.text((10>a?"0":"")+a+":"+(10>t?"0":"")+t)},updatePlayhead:function(t){100>=100*t&&a(100*t+"%");var e=this.duration*t,t=Math.floor(e/60);e=Math.floor(e%60),i.text((10>t?"0":"")+t+":"+(10>e?"0":"")+e)},play:function(){var a=$("li.playing");s.removeClass("player-play").addClass("player-pause"),BookUtils.setStorage(o.store_chapter_key,a.data("num")),$("#cur_play").text(a.text()),"undefined"!=typeof site_enabled_g&&site_enabled_g&&$("#ads_div").empty().load("/scripts/ads/ads_auto_no_write.js")},pause:function(){s.removeClass("player-pause").addClass("player-play")},trackEnded:function(){var a=$("#audios li.playing").next();a.length||(a=$("#audios li").first()),a.addClass("playing").siblings().removeClass("playing"),n.load($("a",a).attr("data-src")),n.play(),BookUtils.setStorage(o.store_chapter_key,this.element.volume)}}),n=r[0],p=$("#audios li").first();BookUtils.getStorage(o.store_chapter_key)&&(p=$("#chapter"+BookUtils.getStorage(o.store_chapter_key))),p.addClass("playing");var d=$("a",p).attr("data-src");d&&(n.load($("a",p).attr("data-src")),$("#cur_play").text(p.text())),$("#audios li").click(function(a){a.preventDefault(),$(this).addClass("playing").siblings().removeClass("playing"),d=$("li.playing").find("a").attr("data-src"),d&&(n.load(d),n.play())}),s.click(function(a){d=$("li.playing").find("a").attr("data-src"),d&&n.playPause()}),$("#play_last").click(function(a){var t=$("li.playing").prev();t.length||(t=$("#audios li").last()),t.click()}),$("#play_next").click(function(a){var t=$("li.playing").next();t.length||(t=$("#audios li").first()),t.click()}),$(document).keydown(function(a){var t=a.charCode?a.charCode:a.keyCode;if(39==t){var i=$("li.playing").next();i.length||(i=$("#audios li").first()),i.click()}else if(37==t){var e=$("li.playing").prev();e.length||(e=$("#audios li").last()),e.click()}else 32==t&&n.playPause()})});