(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-66b6","chunk-6471"],{"2Mtc":function(e,t,i){"use strict";i.r(t);var n=i("QbLZ"),a=i.n(n),o=i("L2JU"),r=i("NLix"),l=i("X4fA"),s={data:function(){return{headers:{Authorization:"Bearer "+Object(l.a)()},dialog:!1,dialogImageUrl:"",dialogVisible:!1,fileList:[],pictures:[]}},computed:a()({},Object(o.b)(["imagesUploadApi"])),methods:{handleSuccess:function(e,t,i){console.log("response:",e);var n=t.uid,a=e.id;this.pictures.push({uid:n,id:a})},handleBeforeUpload:function(e){console.log(e.type);var t=!1;"image/jpeg"!==e.type&&"image/gif"!==e.type&&"image/png"!==e.type||(t=!0);var i=e.size/1024/1024<1;return t||this.$notify({title:"上传文件只能是图片格式!",type:"error",duration:2500}),i||this.$notify({title:"上传文件大小不能超过 1MB!",type:"error",duration:2500}),t&&i},handleBeforeRemove:function(e,t){for(var i=0;i<this.pictures.length;i++)if(this.pictures[i].uid===e.uid)return Object(r.a)(this.pictures[i].id).then(function(e){}),!0},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},doSubmit:function(){this.fileList=[],this.dialogVisible=!1,this.dialogImageUrl="",this.dialog=!1,this.$parent.$parent.init()},handleError:function(e,t,i){var n=JSON.parse(e.message);this.$notify({title:n.message,type:"error",duration:5e3})}}},c=(i("m6PC"),i("KHd+")),u=Object(c.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialog,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.dialog=t},close:e.doSubmit}},[i("el-upload",{attrs:{"on-preview":e.handlePictureCardPreview,"before-upload":e.handleBeforeUpload,"before-remove":e.handleBeforeRemove,"on-success":e.handleSuccess,"on-error":e.handleError,headers:e.headers,"file-list":e.fileList,action:e.imagesUploadApi,"list-type":"picture-card"}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{src:e.dialogImageUrl,width:"100%",alt:""}})]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},[],!1,null,"54a682af",null);u.options.__file="form.vue";t.default=u.exports},"BC7/":function(e,t,i){},NLix:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"b",function(){return o});var n=i("t3Un");function a(e){return Object(n.a)({url:"api/pictures/"+e,method:"delete"})}function o(e){return Object(n.a)({url:"api/pictures/",method:"delete",data:e})}},bYbN:function(e,t,i){"use strict";i.r(t);var n=i("2Mtc"),a=i("NLix"),o={components:{eForm:n.default},props:{query:{type:Object,required:!0}},data:function(){return{downloadLoading:!1,delLoading:!1,queryTypeOptions:[{key:"filename",display_name:"文件名"},{key:"username",display_name:"用户名"}]}},methods:{toQuery:function(){this.$parent.page=0,this.$parent.init()},doDelete:function(){var e=this;this.delLoading=!0;for(var t=this.$parent.$refs.table.selection,i=[],n=0;n<t.length;n++)i.push(t[n].id);Object(a.b)(i).then(function(t){e.delLoading=!1,e.$parent.init(),e.$notify({title:"删除成功",type:"success",duration:2500})}).catch(function(t){e.delLoading=!1,console.log(t.response.data.message)})},open:function(){var e=this;this.$confirm("你确定删除选中的数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.doDelete()})}}},r=i("KHd+"),l=Object(r.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"head-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入关键字搜索"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.toQuery(t):null}},model:{value:e.query.value,callback:function(t){e.$set(e.query,"value",t)},expression:"query.value"}}),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.queryTypeOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.toQuery}},[e._v("搜索")]),e._v(" "),i("div",{staticStyle:{display:"inline-block",margin:"0px 2px"}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","PICTURE_ALL","PICTURE_UPLOAD"],expression:"['ADMIN','PICTURE_ALL','PICTURE_UPLOAD']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-upload"},on:{click:function(t){e.$refs.form.dialog=!0}}},[e._v("上传图片")]),e._v(" "),i("eForm",{ref:"form"})],1),e._v(" "),i("div",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","PICTURE_ALL","PICTURE_DELETE"],expression:"['ADMIN','PICTURE_ALL','PICTURE_DELETE']"}],staticStyle:{display:"inline-block"}},[i("el-button",{staticClass:"filter-item",attrs:{loading:e.delLoading,disabled:0===e.$parent.data.length||0===e.$parent.$refs.table.selection.length,size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:e.open}},[e._v("删除")])],1)],1)},[],!1,null,null,null);l.options.__file="header.vue";t.default=l.exports},m6PC:function(e,t,i){"use strict";var n=i("BC7/");i.n(n).a}}]);