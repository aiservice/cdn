(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d63b"],{Jk63:function(e,t,o){"use strict";o.r(t);var a=o("Yfch"),s=o("fe1z"),i={data:function(){var e=this;return{loading:!1,dialog:!1,title:"个人入驻",form:{pass:"",email:"",code:""},user:{email:"",password:""},codeLoading:!1,codeData:{type:"email",value:""},buttonName:"获取验证码",isDisabled:!1,time:60,rules:{pass:[{required:!0,trigger:"blur",message:"密码不能为空"},{type:"string",min:6,message:"密码不允许小于6位"}],password_repeat:[{required:!0,validator:function(t,o,a){e.form.pass!==o?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],email:[{required:!0,validator:function(e,t,o){""===t?o(new Error("新邮箱不能为空")):Object(a.a)(t)?o():o(new Error("邮箱格式错误"))},trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},sendCode:function(){var e=this;if(this.form.email&&this.form.email!==this.email){this.codeLoading=!0,this.buttonName="验证码发送中",this.codeData.value=this.form.email;var t=this;Object(s.e)(this.codeData).then(function(o){e.$message({showClose:!0,message:"发送成功，验证码有效期5分钟",type:"success"}),e.codeLoading=!1,e.isDisabled=!0,e.buttonName=e.time--+"秒后重新发送",e.timer=window.setInterval(function(){t.buttonName=t.time+"秒后重新发送",--t.time,t.time<0&&(t.buttonName="重新发送",t.time=60,t.isDisabled=!1,window.clearInterval(t.timer))},1e3)}).catch(function(t){e.resetForm(),e.codeLoading=!1,console.log(t.response.data.message)})}},doSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,e.user={email:e.form.email,nickname:e.form.nickname,password:e.form.pass},Object(s.d)(e.form.code,e.user).then(function(t){e.loading=!1,e.resetForm(),e.$message({showClose:!0,message:"注册成功,请使用邮箱登陆！",type:"success"})}).catch(function(t){e.loading=!1,console.log(t.response.data.message)})})},resetForm:function(){this.dialog=!1,this.$refs.form.resetFields(),window.clearInterval(this.timer),this.time=60,this.buttonName="获取验证码",this.isDisabled=!1,this.form={pass:"",email:"",code:""}}}},r=(o("cyVC"),o("KHd+")),l=Object(r.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{display:"inline-block"}},[o("el-dialog",{attrs:{visible:e.dialog,title:e.title,"append-to-body":"",width:"475px"},on:{"update:visible":function(t){e.dialog=t},close:e.cancel}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"88px"}},[o("el-form-item",{attrs:{label:"登陆邮箱",prop:"email"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:30,"auto-complete":"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),o("el-button",{attrs:{loading:e.codeLoading,disabled:e.isDisabled,size:"small"},on:{click:e.sendCode}},[e._v(e._s(e.buttonName))])],1),e._v(" "),o("el-form-item",{attrs:{label:"验证码",prop:"code"}},[o("el-input",{staticStyle:{width:"320px"},attrs:{maxlength:6,"auto-complete":"off"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"88px"}},[o("el-form-item",{attrs:{label:"商户名",prop:"nickname"}},[o("el-input",{staticStyle:{width:"320px"},attrs:{placeholder:"请认真填写,买家支付时会显示此商户名",type:"text","auto-complete":"on"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"登陆密码",prop:"pass"}},[o("el-input",{staticStyle:{width:"320px"},attrs:{maxlength:20,"auto-complete":"off",type:"password"},model:{value:e.form.pass,callback:function(t){e.$set(e.form,"pass",t)},expression:"form.pass"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"重复密码",prop:"password_repeat"}},[o("el-input",{staticStyle:{width:"320px"},attrs:{maxlength:20,"auto-complete":"off",type:"password"},model:{value:e.form.password_repeat,callback:function(t){e.$set(e.form,"password_repeat",t)},expression:"form.password_repeat"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("注册")])],1)],1)],1)},[],!1,null,"1d430c1b",null);l.options.__file="reg.vue";t.default=l.exports},Yfch:function(e,t,o){"use strict";function a(e){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(e)}o.d(t,"a",function(){return a})},cyVC:function(e,t,o){"use strict";var a=o("xfV1");o.n(a).a},xfV1:function(e,t,o){}}]);